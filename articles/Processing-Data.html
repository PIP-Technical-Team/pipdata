<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="pipdata">
<title>Processing Data functions â€¢ pipdata</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Processing Data functions">
<meta property="og:description" content="pipdata">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pipdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9014</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/PIP-data-pipeline.html">PIP data process</a>
    <a class="dropdown-item" href="../articles/Processing-Data.html">Processing Data functions</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Processing Data functions</h1>
            
      
      
      <div class="d-none name"><code>Processing-Data.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pip-technical-team.github.io/pipdata/">pipdata</a></span><span class="op">)</span></span></code></pre></div>
<p>This article explains how the <code>pd_*</code> functions in
{pipdata} work together. These are the functions used during the data
processing pipeline and that are necessary to process both welfare data
from datalibweb and auxiliary data from different sources into the files
that will be used for calculations in the estimations pipeline. The
process is summarized in the</p>
<div class="figure">
<img src="images/pd_functions.png" id="pd-flow" width="640" alt=""><p class="caption">Process Data function order</p>
</div>
<div class="section level3">
<h3 id="load-relevant-data">Load relevant data<a class="anchor" aria-label="anchor" href="#load-relevant-data"></a>
</h3>
<p>All the data in the PIP process has to be loaded with the package
{pipload}. function <code>pip_load_dlw()</code> loads any welfare data
available in DatalibWeb. It does not use the datalibweb Stata command
but reads directly into a flat folder provided by the Poverty GP.
Function <code>pip_load_aux()</code> loads any auxiliary data available
in the PIP project. Auxiliary data refers to any dataset that is not
welfare data. The most important auxiliary data is the Price FrameWork
(pfw) dataset, since it is data that contains all relevant metadata for
data processing and estimations.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span>  <span class="op">&lt;-</span> <span class="fu">pipload</span><span class="fu">::</span><span class="fu"><a href="https://pip-technical-team.github.io/pipload/reference/pip_load_dlw.html" class="external-link">pip_load_dlw</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"PHL"</span>, year <span class="op">=</span> <span class="fl">2012</span><span class="op">)</span></span>
<span><span class="va">pfw</span> <span class="op">&lt;-</span> <span class="fu">pipload</span><span class="fu">::</span><span class="fu"><a href="https://pip-technical-team.github.io/pipload/reference/pip_load_aux.html" class="external-link">pip_load_aux</a></span><span class="op">(</span><span class="st">"pfw"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="country-price-framework-cpfw">Country Price FrameWork (cpfw)<a class="anchor" aria-label="anchor" href="#country-price-framework-cpfw"></a>
</h3>
<p>The country price framework is a subset of the pfw data. Yet, it is
not simply filtered data. Sometimes you may find two welfare types in
the same survey, so it is necessary to have to different sets of
information regarding each welfare type. This is way, pfw must be
filtered using the <code><a href="../reference/get_country_pfw.html">get_country_pfw()</a></code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cpfw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_country_pfw.html">get_country_pfw</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">pfw</span><span class="op">)</span></span>
<span><span class="co"># names(cpfw)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="pd_-functions">pd_* functions<a class="anchor" aria-label="anchor" href="#pd_-functions"></a>
</h2>
<p>All functions prefixed with <code>pd_</code> are for Processing Data.
They are used only to convert data from datalibweb form to pip form. The
results format of the data is what is known as input cache data. All the
<code>pd_</code> functions are intended to be used at a high level, but
they depend on lower level S3 methods that vary depending on the type of
welfare data.</p>
<div class="section level3">
<h3 id="split-alternative-welfare">Split alternative welfare<a class="anchor" aria-label="anchor" href="#split-alternative-welfare"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pd_split_alt_welfare.html">pd_split_alt_welfare</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">cpfw</span><span class="op">)</span></span>
<span><span class="co"># names(lf)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="clean-from-dlw-format">Clean from DLW format<a class="anchor" aria-label="anchor" href="#clean-from-dlw-format"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lf_dlw</span>    <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pd_dlw_clean.html">pd_dlw_clean</a></span><span class="op">(</span><span class="va">lf</span>, <span class="va">cpfw</span><span class="op">)</span></span>
<span><span class="co"># names(lf_dlw)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="clean-to-be-used-by-wbpip">Clean to be used by <code>wbpip</code><a class="anchor" aria-label="anchor" href="#clean-to-be-used-by-wbpip"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lf_wbpip</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pd_wbpip_clean.html">pd_wbpip_clean</a></span><span class="op">(</span><span class="va">lf_dlw</span><span class="op">)</span></span>
<span><span class="co"># names(lf_wbpip)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="add-variables-for-pip-process">Add variables for PIP process<a class="anchor" aria-label="anchor" href="#add-variables-for-pip-process"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ppp</span>  <span class="op">&lt;-</span> <span class="fu">pipload</span><span class="fu">::</span><span class="fu"><a href="https://pip-technical-team.github.io/pipload/reference/pip_load_aux.html" class="external-link">pip_load_aux</a></span><span class="op">(</span><span class="st">"ppp"</span><span class="op">)</span></span>
<span><span class="va">cpi</span>  <span class="op">&lt;-</span> <span class="fu">pipload</span><span class="fu">::</span><span class="fu"><a href="https://pip-technical-team.github.io/pipload/reference/pip_load_aux.html" class="external-link">pip_load_aux</a></span><span class="op">(</span><span class="st">"cpi"</span><span class="op">)</span></span>
<span><span class="va">pop</span>  <span class="op">&lt;-</span> <span class="fu">pipload</span><span class="fu">::</span><span class="fu"><a href="https://pip-technical-team.github.io/pipload/reference/pip_load_aux.html" class="external-link">pip_load_aux</a></span><span class="op">(</span><span class="st">"pop"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lf_pip_vars</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/pd_add_pip_vars.html">pd_add_pip_vars</a></span><span class="op">(</span>lf <span class="op">=</span> <span class="va">lf_wbpip</span>, </span>
<span>                  cpfw <span class="op">=</span> <span class="va">cpfw</span>, </span>
<span>                  cpi <span class="op">=</span> <span class="va">cpi</span>, </span>
<span>                  ppp <span class="op">=</span> <span class="va">ppp</span>, </span>
<span>                  pop <span class="op">=</span> <span class="va">pop</span><span class="op">)</span></span>
<span><span class="co"># names(lf_pip_vars[[1]])</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by R.Andres Castaneda.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
